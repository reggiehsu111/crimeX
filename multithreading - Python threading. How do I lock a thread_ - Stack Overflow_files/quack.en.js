!function(e,t){"use strict";"function"==typeof define&&"object"==typeof define.amd?define([],function(){return t(e)}):e.SineWaves=t(e)}(this,function(){"use strict";function e(e){if(this.options=l.defaults(this.options,e),this.el=this.options.el,delete this.options.el,!this.el)throw"No Canvas Selected";if(this.ctx=this.el.getContext("2d"),this.waves=this.options.waves,delete this.options.waves,!this.waves||!this.waves.length)throw"No waves specified";this.dpr=window.devicePixelRatio||1,this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this)),this.setupUserFunctions(),this.easeFn=l.getFn(f,this.options.ease,"linear"),this.rotation=l.degreesToRadians(this.options.rotate),l.isType(this.options.running,"boolean")&&(this.running=this.options.running),this.setupWaveFns(),this.loop()}function t(e,t){return l.isType(e,"number")?e:(e=e.toString(),e.indexOf("%")>-1?(e=parseFloat(e),e>1&&(e/=100),t*e):e.indexOf("px")>-1?parseInt(e,10):void 0)}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r});for(var n=["ms","moz","webkit","o"],i=0;i<n.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[n[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[i]+"CancelAnimationFrame"]||window[n[i]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var r=0;window.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-r)),i=window.setTimeout(function(){e(t+n)},n);return r=t+n,i}}window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)});var o=Math.PI/180,a=2*Math.PI,s=Math.PI/2,l={},c=l.isType=function(e,t){var n={}.toString.call(e).toLowerCase();return n==="[object "+t.toLowerCase()+"]"},u=l.isFunction=function(e){return c(e,"function")},d=l.isString=function(e){return c(e,"string")},h=(l.isNumber=function(e){return c(e,"number")},l.shallowClone=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}),f=(l.defaults=function(e,t){c(t,"object")||(t={});var n=h(e);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},l.degreesToRadians=function(e){if(!c(e,"number"))throw new TypeError("Degrees is not a number");return e*o},l.getFn=function(e,t,n){return u(t)?t:d(t)&&u(e[t.toLowerCase()])?e[t.toLowerCase()]:e[n]},{});f.linear=function(e,t){return t},f.sinein=function(e,t){return t*(Math.sin(e*Math.PI-s)+1)*.5},f.sineout=function(e,t){return t*(Math.sin(e*Math.PI+s)+1)*.5},f.sineinout=function(e,t){return t*(Math.sin(e*a-s)+1)*.5};var p={};p.sine=function(e){return Math.sin(e)},p.sin=p.sine,p.sign=function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},p.square=function(e){return p.sign(Math.sin(e*a))},p.sawtooth=function(e){return 2*(e-Math.floor(e+.5))},p.triangle=function(e){return Math.abs(p.sawtooth(e))},e.prototype.options={"speed":10,"rotate":0,"ease":"Linear","wavesWidth":"95%"},e.prototype.setupWaveFns=function(){for(var e=-1,t=this.waves.length;++e<t;)this.waves[e].waveFn=l.getFn(p,this.waves[e].type,"sine")},e.prototype.setupUserFunctions=function(){l.isFunction(this.options.resizeEvent)&&(this.options.resizeEvent.call(this),window.addEventListener("resize",this.options.resizeEvent.bind(this))),l.isFunction(this.options.initialize)&&this.options.initialize.call(this)};var g={"timeModifier":1,"amplitude":50,"wavelength":50,"segmentLength":10,"lineWidth":1,"strokeStyle":"rgba(255, 255, 255, 0.2)","type":"Sine"};return e.prototype.getDimension=function(e){return l.isNumber(this.options[e])?this.options[e]:l.isFunction(this.options[e])?this.options[e].call(this,this.el):"width"===e?this.el.clientWidth:"height"===e?this.el.clientHeight:void 0},e.prototype.updateDimensions=function(){var e=this.getDimension("width"),n=this.getDimension("height");this.width=this.el.width=e*this.dpr,this.height=this.el.height=n*this.dpr,this.el.style.width=e+"px",this.el.style.height=n+"px",this.waveWidth=t(this.options.wavesWidth,this.width),this.waveLeft=(this.width-this.waveWidth)/2,this.yAxis=this.height/2},e.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},e.prototype.time=0,e.prototype.update=function(e){this.time=this.time-.007,"undefined"==typeof e&&(e=this.time);var t=-1,n=this.waves.length;for(this.clear(),this.ctx.save(),this.rotation>0&&(this.ctx.translate(this.width/2,this.height/2),this.ctx.rotate(this.rotation),this.ctx.translate(-this.width/2,-this.height/2));++t<n;){var i=this.waves[t].timeModifier||1;this.drawWave(e*i,this.waves[t])}this.ctx.restore(),t=void 0,n=void 0},e.prototype.getPoint=function(e,t,n){var i=e*this.options.speed+(-this.yAxis+t)/n.wavelength,r=n.waveFn.call(this,i,p),o=this.easeFn.call(this,t/this.waveWidth,n.amplitude);return i=t+this.waveLeft,r=o*r+this.yAxis,{"x":i,"y":r}},e.prototype.drawWave=function(e,t){t=l.defaults(g,t),this.ctx.lineWidth=t.lineWidth*this.dpr,this.ctx.strokeStyle=t.strokeStyle,this.ctx.lineCap="butt",this.ctx.lineJoin="round",this.ctx.beginPath(),this.ctx.moveTo(0,this.yAxis),this.ctx.lineTo(this.waveLeft,this.yAxis);var n,i;for(n=0;n<this.waveWidth;n+=t.segmentLength)i=this.getPoint(e,n,t),this.ctx.lineTo(i.x,i.y),i=void 0;n=void 0,t=void 0,this.ctx.lineTo(this.width,this.yAxis),this.ctx.stroke()},e.prototype.running=!0,e.prototype.loop=function(){this.running===!0&&this.update(),window.requestAnimationFrame(this.loop.bind(this))},e.prototype.Waves=p,e.prototype.Ease=f,e}),StackExchange.quack=function(){var e=function(){$(".js-quackoverflow, .js-quack-popover").removeClass("is-visible")},t=function(){$(".js-step").addClass("d-none"),waves.running=!1},n=function(){$("#quack-sound")[0].play()},i=function(i){$("#"+i).removeClass("d-none");var r=new SineWaves({"el":document.getElementById("waves"),"speed":15,"ease":"SineInOut","wavesWidth":"100%","waves":[{"timeModifier":2,"lineWidth":2,"amplitude":-10,"wavelength":30},{"timeModifier":1,"lineWidth":2,"amplitude":-30,"wavelength":30}],"resizeEvent":function(){var e=this.ctx.createLinearGradient(0,0,this.width,0);e.addColorStop(0,"rgba(76, 141, 189, 0.25)"),e.addColorStop(.5,"rgba(242, 114, 12, 0.75)"),e.addColorStop(1,"rgba(255, 255, 25, 0");for(var t=-1,n=this.waves.length;++t<n;)this.waves[t].strokeStyle=e;t=void 0,n=void 0,e=void 0}});r.running=!0,setTimeout(function(){r.waves[0].amplitude=-1,r.waves[1].amplitude=-3,$(".js-step03 > p").addClass("d-none"),$("#uhoh").removeClass("d-none"),setTimeout(function(){r.waves[0].amplitude=-10,r.waves[1].amplitude=-30,$("#uhoh").addClass("d-none"),$("#listening").removeClass("d-none"),setTimeout(function(){r.running=!1,t(),$(".js-step04").removeClass("d-none"),setTimeout(function(){$("#thinking-cap").addClass("d-none"),$("#any-time-now").removeClass("d-none"),setTimeout(function(){t(),$(".js-step05").removeClass("d-none"),n(),setTimeout(function(){t(),$(".js-step06").removeClass("d-none"),$(".js-quack-btn").one("click",function(){t(),e()})},3e3)},5e3)},5e3)},7e3)},4e3)},5e3)},r=function(e){t(),$(".js-step03").removeClass("d-none"),$(".js-step03").data("pref",e),i(e)},o=function(){$(".js-quackoverflow").addClass("is-visible");var n=setTimeout(function(){$(".js-quack-popover").addClass("is-visible"),$(".js-step01").removeClass("d-none")},3e3);$(".js-yes-btn, .js-no-btn").on("click",function(){r($(this).data("pref"))}),$(".js-quackoverflow").one("click",function(){clearTimeout(n),$(".js-quack-popover").addClass("is-visible"),t();var e=$("#quack-sound")[0];e.play(),e.pause(),$(".js-step02").removeClass("d-none")}),$(".js-again").on("click",function(){r($(".js-pref03").data("pref"))}),$(".js-enough-already").on("click",function(){t(),$(".js-quack-btn").toggleClass("d-none"),$(".js-step07").removeClass("d-none")}),$(".js-goodbye").on("click",function(){$.cookie("quack",1,{"path":"/","expires":3}),t(),e()})};return{"init":o}}();